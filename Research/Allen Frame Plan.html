<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<h2 dir="ltr" id="docs-internal-guid-99d61d6e-877c-bb3e-7be1-b51d8e0e9766">Database Part</h2>
<p dir="ltr">Table base type:</p>
<ol>
  <li dir="ltr">
    <p dir="ltr">Entity&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (tbl_entity_*)</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">Relation&nbsp;&nbsp;&nbsp; (tbl_rel_*_to_*)</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">View&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (tbl_view_*)</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">Index&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; (tbl_index_*)</p>
  </li>
</ol>
<br />
<p dir="ltr">Note:</p>
<ol>
  <li dir="ltr">
    <p dir="ltr">table name all in lowercase, link with _</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">table name never contains following system key words:</p>
  </li>
  <ul>
    <li dir="ltr">
      <p dir="ltr">tbl</p>
    </li>
    <li dir="ltr">
      <p dir="ltr">entity</p>
    </li>
    <li dir="ltr">
      <p dir="ltr">to</p>
    </li>
    <li dir="ltr">
      <p dir="ltr">rel</p>
    </li>
    <li dir="ltr">
      <p dir="ltr">view</p>
    </li>
    <li dir="ltr">
      <p dir="ltr">index</p>
    </li>
  </ul>
  <li dir="ltr">
    <p dir="ltr">never directly update tables of &ldquo;View&rdquo; or &ldquo;Index&rdquo;, auto sync from &ldquo;Entity&rdquo; and &ldquo;Relation&rdquo; on update</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">Front end only access View</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">Search engine (solr or sql search) only access Index table, Index table only store search related columns of entities, store duplicate items to solve one to multiple relationship, each index table should have one SOLR collection with same columns, but in SOLR store one document with MULTIVALUE column to solve one to multiple relationship. (**** id IS NOT unique primary key in this type of table ****)</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">&ldquo;tbl_&rdquo; is the prefix to all table, can be configured (e.g. modx_, mysite_)</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">* is the class (or entity) name (e.g. tbl_entity_account, tbl_entity_image)</p>
  </li>
</ol>
<br />
<p dir="ltr">Column:</p>
<ol>
  <li dir="ltr">
    <p dir="ltr">primary key: id</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">foreign key: fk_*_id</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">updated: timestamp</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">entered: timestamp on INSERT and left unchanged on UPDATE</p>
  </li>
</ol>
<br />
<h2 dir="ltr">Control Part</h2>
<p dir="ltr">Table Handler</p>
<ol>
  <li dir="ltr">
    <p dir="ltr">Entity&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </p>
  </li>
</ol>
<p dir="ltr">(entity_*.class.php) -&gt; base handler thing.class.php, each class file represent one entity table, read/write column values</p>
<ol start="2">
  <li dir="ltr">
    <p dir="ltr">Relation</p>
  </li>
</ol>
<p dir="ltr">N/A -&gt; handle by the two related entity classes</p>
<ol start="3">
  <li dir="ltr">
    <p dir="ltr">View</p>
  </li>
</ol>
<p dir="ltr">(view_*.class.php) -&gt; base handler view.class.php, each class file represents one (or none) view table, read column values from one or more tables to generate a page view object</p>
<ol start="4">
  <li dir="ltr">
    <p dir="ltr">Index</p>
  </li>
</ol>
<p dir="ltr">(index_*.class.php) -&gt; base handler index.class.php, each class file represents one index table, read column values from one or more tables to generate search result</p>
<br />
<p dir="ltr">Render Object Handler</p>
<ol>
  <li dir="ltr">
    <p dir="ltr">PHP renderer, render VIEW object to web page, need to consider a way to load a template only for changeable part, make it consistent to AJAX renderer</p>
  </li>
  <li dir="ltr">
    <p dir="ltr">AJAX renderer, handling web front AJAX post to fetch and replace certain part of the page</p>
  </li>
</ol>
<h2 dir="ltr">Web Part</h2>
<p dir="ltr">ajax changing pages, any internal links (or at least most pages in main menu) should have double rendering (both from server end and ajax, should have consistent content), will try with Chunk kind of structure.</p>
</body>
</html>
